# VCMS 자동 리포트 시스템

## 이게 뭔가요?

VCMS 슬랙 채널(`#system-vcms-noti`)의 메시지를 AI가 자동으로 읽고, **주간 리포트**를 만들어서 슬랙에 올려주는 시스템입니다.

사람이 하던 수작업 리포트를 자동화한 거예요.

---

## 어떻게 동작하나요?

```
매주 월요일 오후 3시
  |
  +-- 1. 슬랙 채널 메시지 수집 (지난주 월~일)
  +-- 2. 팀원들이 남긴 피드백 반영
  +-- 3. AI(Gemini)가 주간 리포트 작성
  +-- 4. 슬랙에 리포트 + 피드백 버튼 게시
```

---

## 리포트 정보

| 항목 | 내용 |
|------|------|
| **실행 시점** | 매주 월요일 오후 3시 |
| **커버 범위** | 지난주 월요일 00:00 ~ 일요일 23:59 |
| **내용** | 주간 종합 분석 |

- 공휴일이 월요일이면 스킵됩니다 (화요일에 수동 실행 가능)
- 해당 기간에 메시지가 없으면 "내용 없음" 리포트가 올라옵니다

---

## 피드백 시스템

리포트가 올라오면 스레드에 **💬 피드백 하기** 버튼이 있습니다.

### 피드백 하는 법
1. 스레드에서 **💬 피드백 하기** 버튼 클릭
2. 피드백 유형 선택 (사실 오류 / 분류 기준 / 포맷 / 기타)
3. 내용 작성 후 제출

### 피드백이 반영되는 원리
- 제출한 피드백은 **영구 저장**됩니다 (최근 90일분 적용)
- 다음 주 리포트부터 AI가 피드백을 참고해서 작성합니다
- 한번 "비밀번호 변경은 기술이슈 아님"이라고 피드백하면, 그 다음부터는 계속 반영됩니다

### 피드백 유형 가이드

| 유형 | 언제 쓰나요 | 예시 |
|------|------------|------|
| ❌ 사실 오류 수정 | 리포트 내용이 틀렸을 때 | "서귀피안은 무료체험 신청 안 했음" |
| 📋 분류 기준 변경 | 분류가 맞지 않을 때 | "비밀번호 변경은 교육간 특이사항이 아니라 운영 이슈" |
| 📐 포맷/형식 변경 | 리포트 형식을 바꾸고 싶을 때 | "지역별로 묶어서 보여줘" |
| 💡 기타 의견 | 그 외 개선 의견 | "요약이 너무 길어요" |

---

## 리포트에 포함되는 내용

- 📈 주간 누적 지표 (유입, 완료, 진행 중)
- 🛠️ 유형별 진단 (입점/교육, 교육간 특이사항)
- 🚨 핵심 병목 분석
- 🎯 목표/액션 아이템

### 숫자 기준
- **유입**: 신규 신청 업소 수 (중복 제외)
- **완료**: '교육완료' 또는 ✅ 표시된 건
- **교육예정**: 날짜가 명시된 건만
- **미완료**: 채널에서 완료 표시 안 된 건

---

## 자주 묻는 질문

**Q. 리포트가 안 올라왔어요**
-> 공휴일이 월요일이면 스킵됩니다. 개발팀에 수동 실행 요청하세요.

**Q. 리포트 내용이 틀렸어요**
-> 스레드의 피드백 하기 버튼으로 피드백 남겨주세요. 다음 주 리포트부터 반영됩니다.

**Q. 리포트를 지금 당장 받고 싶어요**
-> 개발팀에 요청하면 수동 실행 가능합니다. (GitHub Actions -> Run workflow)

**Q. 피드백을 잘못 남겼어요**
-> 90일 후 자동으로 만료됩니다. 급하면 개발팀에 삭제 요청하세요.

**Q. 어떤 채널 메시지를 읽나요?**
-> `#system-vcms-noti` 채널의 메시지와 스레드 답글 전부 읽습니다.

---

## 시스템 구성 (참고용)

| 구성요소 | 역할 | 비용 |
|---------|------|------|
| GitHub Actions | 매주 월요일 15시 자동 실행 | 무료 |
| Gemini API | 리포트 작성 AI (2.0 Flash) | 무료 |
| Cloudflare Workers | 피드백 버튼 처리 | 무료 |
| Cloudflare KV | 피드백 저장소 | 무료 |

**월 운영 비용: $0 (전체 무료)**
